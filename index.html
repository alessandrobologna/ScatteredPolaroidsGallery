<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Summer Recipes</title>
<meta name="description" content="Scattered Polaroids Gallery" />
<meta name="keywords" content="scattered polaroids, image gallery, javascript, random rotation, 3d, backface, flat design" />
<meta name="author" content="Codrops" />
<link rel="shortcut icon" href="../favicon.ico">
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/demo.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<script src="js/modernizr.min.js"></script>
</head>
<body>
<h2>Gallery of your favourite summer recipes</h2>
<section id="photostack1" class="photostack">
			<div id="photostackCnt">					
			</div>
</section>
</div>

<div id="tmplFigure" style="display:none;">
	<figure>
		<a href="" class="photostack-img"><img src="" alt="img05"/></a>
		<figcaption>
			<h2 class="photostack-title"></h2>
			<div class="photostack-back">
				<p></p>
			</div>
		</figcaption>
	</figure>
</div>
<script src="js/classie.js"></script>
<script src="js/photostack.js"></script>
<script>
// [].slice.call( document.querySelectorAll( '.photostack' ) ).forEach( function( el ) { new Photostack( el ); } );

new Photostack( document.getElementById( 'photostack-1' ), {
callback : function( item ) {
//console.log(item)
}
} );
new Photostack( document.getElementById( 'photostack-2' ), {
callback : function( item ) {
//console.log(item)
}
} );
new Photostack( document.getElementById( 'photostack-3' ), {
callback : function( item ) {
//console.log(item)
}
} );
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	var template = $('#tmplFigure figure').clone();
	
	var data1=[{'link':'','img':'/images/best-of-cannes-5.jpg','caption':'image1','desc':'I have never been to a place so serene in my entire life before. Swimming in clear waters.'},
	{'link':'','img':'/images/best-of-cannes-17.jpg','caption':'image2','desc':''},
	{'link':'','img':'/images/best-of-cannes-3.jpg','caption':'image9','desc':''},
	{'link':'','img':'/images/best-of-cannes-4.jpg','caption':'image8','desc':'What might be right for you may not be right for some. And we know Flipper lives in a world full of wonder flying there-under under the sea.'},
	{'link':'','img':'/images/best-of-cannes-14.jpg','caption':'image9','desc':''},
	{'link':'','img':'/images/best-of-cannes-24.jpg','caption':'image9','desc':''}
	];
	
	//var data = [{"link":"http://www.myrecipes.com/recipe/beer-can-chicken-50400000134847/","img":"img/1.jpg","caption":"","desc":"MyRecipes recommends that you make this Beer-Can Chicken recipe from Southern Living"},{"link":"http://www.myrecipes.com/recipe/coconut-chicken-basmati-rice-50400000134177/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-1/i/recipes/ck/14/04/coconut-chicken-strips-basmati-rice-ck-l.jpg","caption":"","desc":"MyRecipes recommends that you make this Coconut Chicken Strips and Basmati Rice recipe from Cooking Light"},{"link":"http://www.myrecipes.com/recipe/chicken-honey-lemon-leeks-50400000134182/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-2/i/recipes/ck/14/04/braised-chicken-honey-lemon-leeks-ck-l.jpg","caption":"","desc":"Lemon is a bright partner for the caramelized leeks, which cook twice: They are saut&#233;ed, then roasted to meld with the honey and lemon."},{"link":"http://www.myrecipes.com/recipe/chicken-mashed-potatoes-gravy-50400000134727/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-3/i/recipes/ck/14/05/chicken-mashed-potatoes-gravy-ck-l.jpg","caption":"","desc":"The gravy is the standout, perfect for stirring into mashed potatoes. Serve with quick-cooking greens like spinach or kale for an easy, family-friendly meal."},{"link":"http://www.myrecipes.com/recipe/chicken-corn-bread-muffins-50400000134169/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-1/i/recipes/ck/14/04/chicken-posole-cornbread-muffins-ck-l.jpg","caption":"","desc":"MyRecipes recommends that you make this Chicken Posole and Corn Bread Muffins recipe from Cooking Light"}]
	
	var url = window.location.href;
	
	var host = 'http://www.dev.1bot.co';
	$.get(host+'/search.json?order=score&brand=myrecipes.com&query=summer&limit=15', function(data) {
		var array = [];
		$.each(data, function() {
			array.push({
				link : this.link,
				img: host + this.photos[0].uri,
		        caption: this.photos[0].caption,
		        desc: this.description
		    });
		});
		console.log(data);
		//var data = JSON.stringify(array);
   		handleData(array);   		
	},'json').fail(function() {
   		alert('error');
	});
			
	
	//handleData(data);
	function handleData(data) {
		console.debug(data);
		//var data1 = $.parseJSON(data);
		//console.debug(data1);
		//var data = [{"link":"http://www.myrecipes.com/recipe/beer-can-chicken-50400000134847/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-2/i/recipes/sl/14/05/beer-can-chicken-sl-l.jpg","caption":"","desc":"MyRecipes recommends that you make this Beer-Can Chicken recipe from Southern Living"},{"link":"http://www.myrecipes.com/recipe/coconut-chicken-basmati-rice-50400000134177/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-1/i/recipes/ck/14/04/coconut-chicken-strips-basmati-rice-ck-l.jpg","caption":"","desc":"MyRecipes recommends that you make this Coconut Chicken Strips and Basmati Rice recipe from Cooking Light"},{"link":"http://www.myrecipes.com/recipe/chicken-honey-lemon-leeks-50400000134182/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-2/i/recipes/ck/14/04/braised-chicken-honey-lemon-leeks-ck-l.jpg","caption":"","desc":"Lemon is a bright partner for the caramelized leeks, which cook twice: They are saut&#233;ed, then roasted to meld with the honey and lemon."},{"link":"http://www.myrecipes.com/recipe/chicken-mashed-potatoes-gravy-50400000134727/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-3/i/recipes/ck/14/05/chicken-mashed-potatoes-gravy-ck-l.jpg","caption":"","desc":"The gravy is the standout, perfect for stirring into mashed potatoes. Serve with quick-cooking greens like spinach or kale for an easy, family-friendly meal."},{"link":"http://www.myrecipes.com/recipe/chicken-corn-bread-muffins-50400000134169/","img":"http://cdn.media.dev.1bot.co/net/timeinc/myrecipes/img4-1/i/recipes/ck/14/04/chicken-posole-cornbread-muffins-ck-l.jpg","caption":"","desc":"MyRecipes recommends that you make this Chicken Posole and Corn Bread Muffins recipe from Cooking Light"}];
		$('#photostackCnt').empty();
		$.each(data, function(i, obj) {
			console.log(obj);
			
			var fig = template.clone();
			fig.find('.photostack-img').attr('href',obj.link);
			fig.find('.photostack-img img').attr('src',obj.img).attr('width','300');
			fig.find('.photostack-title').append(obj.caption);
			if (obj.desc != '') {
				fig.find('.photostack-back p').append(obj.desc);
			} else {
				fig.find('.photostack-back').remove();			
			}
			$('#photostackCnt').append(fig);
		});
		
		new Photostack( document.getElementById( 'photostack1' ), {
			callback : function( item ) {
				//console.log(item)
			}
		} );
	}
});
</script>
</body>
</html>